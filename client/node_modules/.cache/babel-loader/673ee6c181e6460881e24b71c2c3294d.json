{"ast":null,"code":"var _jsxFileName = \"/Users/obscurax/Documents/E\\u0301tudes/Applications Web/react-gambling-project/src/chat/Chat.js\";\nimport React from 'react';\nimport { ChatClient } from './ChatClient';\n/* Une simple classe qui gère un champ de texte. Ce dernier est utilisé pour entrer le nom de l'utilisateur et la saisie de messages\n  Elle accepte les propriétés suivantes :\n  - label : étiquette à gauche du champ\n  - onChange : callback appelé chaque fois que le contenu change\n  - onSubmit : callback appelé quand on appuie sur entrée\n  - autoFocus : si le champ doit avoir le focus ou non\n\n  <InputField label=\"Nom\" onChange={this.props.onChange} onSubmit={this.props.onClick} autoFocus />\n*/\n\nclass InputField extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      value: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    if (this.props.onChange) this.props.onChange(event.target.value);\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    if (this.props.onSubmit) this.props.onSubmit(this.state.value);\n    this.setState({\n      value: \"\"\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    return React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, this.props.label, \" \"), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleChange,\n      value: this.state.value,\n      autoFocus: this.props.autoFocus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }));\n  }\n\n}\n/* La fenêtre de login, présentée en premier dans l'application.\n  Elle comporte un champ \"Nom\" et un bouton \"Rejoindre\".\n  Elle possède les propriétés suivantes :\n  - onNameChange : callback appelé lorsque la valeur du nom change\n  - onLogin : callback appelé lorsque l'on se connecte\n*/\n\n\nclass LoginWindow extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Chat\"), React.createElement(InputField, {\n      label: \"Nom\",\n      onChange: this.props.onNameChange,\n      onSubmit: this.props.onLogin,\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.props.onLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Rejoindre\"));\n  }\n\n}\n/* La fenêtre de chat, présentée une fois que l'utilisateur s'est connecté.\n  Elle montre le nom de l'utilisateur, la liste des messages, un champ pour ajouter un message et un bouton pour quitter.\n  Elle possède les propriétés suivantes :\n  - name : nom de l'utilisateur\n  - onQuit : callback appelé lorsque l'on clique sur quitter\n  Elle possède l'état suivant :\n  - messages : liste des messages affichés\n  La méthode \"submitMessage\" peut être appelée pour envoyer un message\n  La méthode \"addMessages\" peut être appelée pour ajouter une liste de messages. Elle est utilisée par le client de chat pour ajouter des messages provenant du serveur.\n*/\n\n\nclass ChatWindow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: []\n    };\n    this.submitMessage = this.submitMessage.bind(this);\n    this.addMessages = this.addMessages.bind(this);\n    this.chat = new ChatClient(this.props.name);\n    this.chat.onMessages(this.addMessages);\n  }\n\n  addMessages(messages) {\n    this.setState((state, props) => ({\n      messages: state.messages.concat(messages)\n    }));\n  }\n\n  submitMessage(text) {\n    this.chat.sendMessage(text);\n  }\n\n  render() {\n    const messages = this.state.messages.map(m => React.createElement(\"li\", {\n      key: m.name + m.text,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \" \", m.name, \": \", m.text, \" \"));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Messages\"), \"Pseudo : \", this.props.name, React.createElement(InputField, {\n      label: \"Message\",\n      onSubmit: this.submitMessage,\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, messages), React.createElement(\"button\", {\n      onClick: this.props.onQuit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Quitter\"));\n  }\n\n}\n/* L'application est composé de deux vues :\n  - LoginWindow : la fenêtre de login avec un champ \"nom\" et un bouton \"rejoindre\"\n  - ChatWindow : la fenêtre de discussion avec un champ \"message\", la liste des messages et un bouton \"quitter\"\n  L'état est composé de :\n  - name : le nom de l'utilisateur\n  - current : la fenêtre à afficher (login ou chat)\n  Les méthodes sont les suivantes :\n  - closeChat : terminer une session de chat\n  - startChat : commencer un chat avec comme nom celui actuellement dans l'état\n  - setName : changer le nom stocké dans l'état\n*/\n\n\nclass Chat extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      name: \"\",\n      current: \"login\"\n    };\n    this.closeChat = this.closeChat.bind(this);\n    this.startChat = this.startChat.bind(this);\n    this.setName = this.setName.bind(this);\n  }\n\n  closeChat() {\n    this.setState({\n      current: \"login\"\n    });\n  }\n\n  startChat() {\n    this.setState({\n      current: \"chat\"\n    });\n  }\n\n  setName(name) {\n    this.setState({\n      name: name\n    });\n  }\n\n  render() {\n    if (this.state.current === \"login\") return React.createElement(LoginWindow, {\n      onNameChange: this.setName,\n      onLogin: this.startChat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    });else return React.createElement(ChatWindow, {\n      name: this.state.name,\n      onQuit: this.closeChat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Chat;","map":{"version":3,"sources":["/Users/obscurax/Documents/Études/Applications Web/react-gambling-project/src/chat/Chat.js"],"names":["React","ChatClient","InputField","Component","constructor","state","value","handleChange","bind","handleSubmit","event","props","onChange","target","setState","onSubmit","preventDefault","render","label","autoFocus","LoginWindow","onNameChange","onLogin","ChatWindow","messages","submitMessage","addMessages","chat","name","onMessages","concat","text","sendMessage","map","m","onQuit","Chat","current","closeChat","startChat","setName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { ChatClient } from './ChatClient';\n\n/* Une simple classe qui gère un champ de texte. Ce dernier est utilisé pour entrer le nom de l'utilisateur et la saisie de messages\n  Elle accepte les propriétés suivantes :\n  - label : étiquette à gauche du champ\n  - onChange : callback appelé chaque fois que le contenu change\n  - onSubmit : callback appelé quand on appuie sur entrée\n  - autoFocus : si le champ doit avoir le focus ou non\n\n  <InputField label=\"Nom\" onChange={this.props.onChange} onSubmit={this.props.onClick} autoFocus />\n*/\nclass InputField extends React.Component {\n  constructor() {\n    super()\n    this.state = {value: \"\"}\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  handleChange(event) {\n    if(this.props.onChange) this.props.onChange(event.target.value)\n    this.setState({value: event.target.value})\n  }\n\n  handleSubmit(event) {\n    if(this.props.onSubmit) this.props.onSubmit(this.state.value)\n    this.setState({value: \"\"})\n    event.preventDefault()\n  }\n\n  render() {\n    return (<form onSubmit={this.handleSubmit}>\n        <label>{this.props.label} </label>\n        <input type=\"text\" onChange={this.handleChange} value={this.state.value} autoFocus={this.props.autoFocus} />\n      </form>)\n  }\n}\n\n/* La fenêtre de login, présentée en premier dans l'application.\n  Elle comporte un champ \"Nom\" et un bouton \"Rejoindre\".\n  Elle possède les propriétés suivantes :\n  - onNameChange : callback appelé lorsque la valeur du nom change\n  - onLogin : callback appelé lorsque l'on se connecte\n*/\nclass LoginWindow extends React.Component {\n  render() {\n    return <div>\n    <h1>Chat</h1>\n    <InputField label=\"Nom\" onChange={this.props.onNameChange} onSubmit={this.props.onLogin} autoFocus />\n    <button onClick={this.props.onLogin}>Rejoindre</button>\n    </div>\n  }\n}\n\n/* La fenêtre de chat, présentée une fois que l'utilisateur s'est connecté.\n  Elle montre le nom de l'utilisateur, la liste des messages, un champ pour ajouter un message et un bouton pour quitter.\n  Elle possède les propriétés suivantes :\n  - name : nom de l'utilisateur\n  - onQuit : callback appelé lorsque l'on clique sur quitter\n  Elle possède l'état suivant :\n  - messages : liste des messages affichés\n  La méthode \"submitMessage\" peut être appelée pour envoyer un message\n  La méthode \"addMessages\" peut être appelée pour ajouter une liste de messages. Elle est utilisée par le client de chat pour ajouter des messages provenant du serveur.\n*/\nclass ChatWindow extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {messages: []}\n    this.submitMessage = this.submitMessage.bind(this)\n    this.addMessages = this.addMessages.bind(this)\n\n    this.chat = new ChatClient(this.props.name)\n    this.chat.onMessages(this.addMessages)\n  }\n\n  addMessages(messages) {\n    this.setState((state, props) => ({\n      messages: state.messages.concat(messages)\n    }))\n  }\n\n  submitMessage(text) {\n    this.chat.sendMessage(text)\n  }\n\n  render() {\n    const messages = this.state.messages.map((m) => <li key={m.name + m.text}> {m.name}: {m.text} </li>)\n    return (\n      <div>\n        <h1>Messages</h1>\n        Pseudo : {this.props.name}\n        <InputField label=\"Message\" onSubmit={this.submitMessage} autoFocus />\n        <ul>\n          {messages}\n        </ul>\n        <button onClick={this.props.onQuit}>Quitter</button>\n      </div>\n    );\n  }\n}\n\n/* L'application est composé de deux vues :\n  - LoginWindow : la fenêtre de login avec un champ \"nom\" et un bouton \"rejoindre\"\n  - ChatWindow : la fenêtre de discussion avec un champ \"message\", la liste des messages et un bouton \"quitter\"\n  L'état est composé de :\n  - name : le nom de l'utilisateur\n  - current : la fenêtre à afficher (login ou chat)\n  Les méthodes sont les suivantes :\n  - closeChat : terminer une session de chat\n  - startChat : commencer un chat avec comme nom celui actuellement dans l'état\n  - setName : changer le nom stocké dans l'état\n*/\nclass Chat extends React.Component {\n  constructor() {\n    super()\n    this.state = {name: \"\", current: \"login\"}\n\n    this.closeChat = this.closeChat.bind(this)\n    this.startChat = this.startChat.bind(this)\n    this.setName = this.setName.bind(this)\n  }\n\n  closeChat() {\n    this.setState({current: \"login\"})\n  }\n\n  startChat() {\n    this.setState({current: \"chat\"})\n  }\n\n  setName(name) {\n    this.setState({name: name})\n  }\n\n  render() {\n    if(this.state.current === \"login\")\n      return <LoginWindow onNameChange={this.setName} onLogin={this.startChat} />\n    else\n      return <ChatWindow name={this.state.name} onQuit={this.closeChat} />\n  }\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}